# 🚀 批量处理功能使用指南

AI外联军师现在支持批量处理文件夹中的MP4视频文件！

## ⚡ 快速开始

### 基本用法
```bash
# 处理整个文件夹
python main.py batch /path/to/videos

# 带详细输出
python main.py batch docs/data --verbose

# 限制处理数量
python main.py batch docs/data --max 5 --verbose
```

## 🎯 核心特性

### 1. 智能文件发现
- 自动扫描文件夹中的所有 `.mp4` 文件
- 支持中文文件名和路径

### 2. 智能去重处理
- 默认跳过已处理的文件（检查outputs目录中的报告）
- 避免重复处理节省时间和API调用

### 3. 进度追踪
```
============================================================
📋 处理进度: 2/5 - example_video.mp4
============================================================
✅ 本地文件处理完成
✅ 音频转录完成    
✅ 内容分析完成    
✅ 脚本生成完成    
✅ 报告保存完成    
✅ 处理成功
```

### 4. 详细统计报告
```
============================================================
🎉 批量处理完成!
============================================================
✅ 成功处理: 4 个文件
❌ 处理失败: 1 个文件
📊 总计: 5 个文件

📁 输出目录:
  • 分析报告: /path/to/outputs
  • 转录文本: /path/to/outputs/transcripts
```

## 📊 输出结构

批量处理会自动管理输出文件：

```
outputs/
├── 博主A-视频标题1-时间戳.md        # 完整分析报告
├── 博主B-视频标题2-时间戳.md
└── transcripts/
    ├── 博主A-视频标题1-时间戳.txt    # 纯转录文本
    └── 博主B-视频标题2-时间戳.txt
```

## 🛠️ 命令参数

| 参数 | 说明 | 示例 |
|------|------|------|
| `folder` | 包含MP4文件的文件夹路径（必需） | `docs/data` |
| `--verbose`, `-v` | 启用详细输出 | `--verbose` |
| `--max`, `-m` | 最大处理文件数量 | `--max 10` |
| `--skip-existing` | 跳过已处理文件（默认开启） | `--skip-existing` |

## 💡 使用建议

### 1. 首次批量处理
```bash
# 先处理少量文件测试
python main.py batch docs/data --max 2 --verbose

# 确认无误后处理全部
python main.py batch docs/data --verbose
```

### 2. 大批量处理
```bash
# 分批处理，避免长时间运行
python main.py batch /large/video/folder --max 20 --verbose
```

### 3. 重新处理特定文件
如需重新处理某个文件：
1. 删除 `outputs/` 目录中对应的报告文件
2. 重新运行批量处理命令

## ⚠️ 注意事项

1. **API配额**: 批量处理会消耗较多API调用，请注意配额限制
2. **存储空间**: 确保有足够磁盘空间存储转录文本和报告
3. **网络稳定**: 建议在网络稳定的环境下进行批量处理
4. **错误恢复**: 单个文件处理失败不会中断整个批量任务

## 🎉 实际效果

一次批量处理可以：
- 📹 自动处理数十个视频文件
- 🎤 生成准确的音频转录
- 🧠 AI分析博主特征和受众
- 📝 生成个性化外联脚本  
- 📊 提供完整的统计报告

让你的外联工作效率提升数倍！🚀